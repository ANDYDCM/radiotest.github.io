<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <title>RADIO DC MIX EC</title>
  <link rel="icon" type="image/png" href="img/DAR1.png" />

  <!-- Meta PWA -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#09191a" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="RADIO DC MIX EC" />
  <link rel="apple-touch-icon" href="img/DAR1.png" />

  <style>
    :root {
      --vh: 1vh;
    }

    html, body {
      margin: 0;
      padding: 0;
      width: 100vw;
      height: calc(var(--vh) * 100);
      overflow: hidden;
      font-family: 'Saira Condensed', sans-serif;
      touch-action: manipulation;
      overscroll-behavior: none;
      box-sizing: border-box;
      background: #000; /* Fondo seguro */
    }

    #lunaradio {
      width: 100vw;
      height: calc(var(--vh) * 100);
      background: url("img/FONDO.jpg") no-repeat center center;
      background-size: cover;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      overflow: hidden;
    }

    #social-media {
      position: fixed;
      bottom: 1.5rem;
      right: 1.5rem;
      background: #222;
      padding: 0.6rem 1rem;
      border-radius: 2rem;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.3);
      z-index: 9999;
      display: flex;
      align-items: center;
      gap: 0.6rem;
    }

    #social-media img {
      filter: invert(1);
      width: 2.2rem;
      height: 2.2rem;
      transition: transform 0.2s;
    }

    #social-media a:hover img {
      transform: scale(1.2);
    }

    @media (max-width: 768px) {
      #social-media {
        bottom: 0.5rem;
        right: 0.5rem;
        padding: 0.4rem 0.7rem;
        border-radius: 1.2rem;
      }

      #social-media img {
        width: 6vw;
        height: 6vw;
        max-width: 30px;
        max-height: 30px;
      }
    }
  </style>

  <!-- Ajuste para altura real en iOS Safari -->
  <script>
    function updateVh() {
      const vh = window.innerHeight * 0.01;
      document.documentElement.style.setProperty('--vh', `${vh}px`);
    }

    window.addEventListener('load', updateVh);
    window.addEventListener('resize', updateVh);
    window.addEventListener('orientationchange', updateVh);
    window.addEventListener('focus', updateVh);
    window.addEventListener('blur', updateVh);
  </script>

  <!-- jQuery y Lunaradio -->
  <script src="js/jquery-3.2.1.min.js"></script>
  <script src="js/lunaradio.min.js"></script>
</head>
<body>

  <div id="lunaradio">
    <div style="text-align:center; color:white; padding-top:1rem; font-size: 1rem;">
      Desarrollado por: RADIO DJ LOBO AZUL
    </div>
  </div>

  <div id="social-media">
    <a href="https://facebook.com/tu_pagina" target="_blank">
      <img src="https://cdn.jsdelivr.net/npm/simple-icons@v11/icons/facebook.svg" alt="Facebook" />
    </a>
    <a href="https://twitter.com/tu_usuario" target="_blank">
      <img src="https://cdn.jsdelivr.net/npm/simple-icons@v11/icons/twitter.svg" alt="Twitter" />
    </a>
    <a href="https://instagram.com/adcm.club" target="_blank">
      <img src="https://cdn.jsdelivr.net/npm/simple-icons@v11/icons/instagram.svg" alt="Instagram" />
    </a>
    <a href="https://youtube.com/tu_canal" target="_blank">
      <img src="https://cdn.jsdelivr.net/npm/simple-icons@v11/icons/youtube.svg" alt="YouTube" />
    </a>
  </div>

  <script>
    const isMobile = window.innerWidth < 768;

    $("#lunaradio").lunaradio({
      userinterface: "big",
      backgroundcolor: "rgba(9,15,25,0.8)",
      fontcolor: "#ffffff",
      hightlightcolor: "#80ff00",
      fontname: "Saira Condensed",
      googlefont: "Saira+Condensed:wght@100",
      fontratio: isMobile ? "0.32" : "0.3",
      radioname: "DC MIX Ec",
      scroll: "true",
      coverimage: "img/DAR1.png",
      usevisualizer: "Fake",
      coverstyle: "animated",
      visualizertype: "6",
      multicolorvisualizer: "true",
      color1: "f6f6f6",
      color2: "323edd",
      color3: "fc5404",
      color4: "#80ff00",
      itunestoken: "1000lIPN",
      metadatatechnic: "corsproxy",
      ownmetadataurl: "",
      streamurl: "https://node-20.zeno.fm/fxp4altkru2vv.acc",
      streamtype: "radiozeno",
      radiozenoid: "fxp4altkru2vv",
      shoutcastpath: "/stream",
      shoutcastid: "1",
      metadatainterval: "20000",
      volume: "85",
      debug: "false",
      usestreamcorsproxy: "false",
      corsproxy: "https://corsradio.herokuapp.com/index.php?q=",
      autoplay: "true",
      showvolume: "true"
    });
  </script>

  <!-- Service Worker PWA -->
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js')
        .then(reg => console.log('Service Worker registrado'))
        .catch(err => console.error('Error al registrar Service Worker:', err));
    }
  </script>


<script>
  // Función para actualizar vh
  function updateVh() {
    const vh = window.innerHeight * 0.01;
    document.documentElement.style.setProperty('--vh', `${vh}px`);
  }

  // Animación para forzar "giro" y reescalado
  function animateOrientationFix() {
    const lunaradio = document.getElementById('lunaradio');
    if (!lunaradio) return;

    // Aplicamos clase que activa animación CSS
    lunaradio.classList.add('rotate-animation');

    // Después de la animación (600ms), quitamos clase y actualizamos vh
    setTimeout(() => {
      lunaradio.classList.remove('rotate-animation');
      updateVh();
    }, 600);
  }

  // Escuchar cambios de orientación y resize
  window.addEventListener('orientationchange', () => {
    animateOrientationFix();
  });

  window.addEventListener('resize', () => {
    animateOrientationFix();
  });

  // También actualizar vh inicialmente y al hacer focus
  window.addEventListener('load', () => {
    updateVh();
  });
  window.addEventListener('focus', () => {
    updateVh();
  });
</script>

<style>
  /* Animación que rota el contenedor un poco y vuelve a posición normal */
  @keyframes rotateInOut {
    0% {
      transform: rotate(0deg);
    }
    50% {
      transform: rotate(15deg);
    }
    100% {
      transform: rotate(0deg);
    }
  }

  #lunaradio.rotate-animation {
    animation: rotateInOut 0.6s ease-in-out;
  }
</style>
</body>
</html>
